<div class="justify-content-center">
  <div class="title">
    <h1><%= @office.name %></h1>
  </div>
  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
    <div class="my-4 container">
      <div class="carousel-inner d-flex justify-content-between align-items-center">
        <% @office.photos.each do |photo| %>
          <div class="carousel-item <%= 'active' if photo == @office.photos[0] %>">
            <%# <img src="..." class="d-block w-100" alt="..."> %>
            <%= cl_image_tag photo.key, class:"d-block rounded", alt:"Cover", crop: :fill, style:" width: 100%;"  %>
          </div>
        <% end %>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>


  <div class="row mx-2 d-flex">
    <div class="col-7 mx-4">
      <div class="container">
        <div class="name-address">
          <div class="d-flex justify-content-between">
              <div class="mx-4">
                <h6 class="flat-show-address"><%= @office.address %></h6>
              </div>
              <div class="my-10">
                <% if current_user.photo.attached? %>
                  <%= cl_image_tag current_user.photo.key, class: "avatar dropdown-toggle", id: "navbarDropdown", data: { bs_toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false  %>
                <% else %>
                  <%= image_tag "https://res.cloudinary.com/dclozlnfy/image/upload/v1693242201/360_F_187104027_8i2JbFDBB5jB7R65Ce464yRs4gfNbR3Z_cpcsbf.jpg",
                class: "avatar dropdown-toggle", id: "navbarDropdown", data: { bs_toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
                <% end %>
              </div>
          </div>
        </div>
        <hr>
        <br>
         <%= render "shared/lables" %>
        <hr>
        <br>
      </div>
    </div>
    <div class="col-4 mx-4">
       <div class="container">
        <div class="">
          <h6>£<%= @office.price %> per night</h6>
          <%# <p>= @reviews.stars · (= @reviews.comment.length)</p> %>
        </div>
       </div>
      <div class="mx-0">
        <h5>Book this place:</h5>
      </div>
      <div>
        <p>Start date: <span id="startDate1"><%= @office.start_date %></span></p>
        <p>End date: <span id="endDate1"><%= @office.end_date %></span></p>
      </div>
      <%= simple_form_for [@office, @booking], data: { controller: 'flatpickr' } do |f| %>
        <%= f.input :start_date, as: :string, input_html: { data: { flatpickr_target: "startDate" } } %>
        <%= f.input :end_date, as: :string, input_html: { data: { flatpickr_target: "endDate" }, id: 'end_date' } %>
        <%= f.submit 'Schedule your booking' %>
      <% end %>
      <%# <div class="icons">
        <p>Let's share: </p>
        <i class="fa-brands fa-facebook-square me-2 fa-2x"></i>
        <i class="fa-brands fa-twitter-square me-2 fa-2x"></i>
        <i class="fa-brands fa-pinterest-square me-2 fa-2x"></i>
      </div> %>
    </div>
  </div>
  <div class="container">
    <div class="map">
      <div style="mb-2 width: 100%; height: 400px;"
        data-controller="map"
        data-map-markers-value="<%= @markers.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
      </div>
    </div>
  </div>
  <% if policy(@office).edit? %>
    <%= link_to "Edit", edit_office_path(@office) %>
  <% end %>
  <%= link_to "Home", offices_path %>
  <%= button_to "Delete", @office, method: :delete if policy(@office).destroy? %>
</div>
